{
  "deployEnv": "PROD",
  "project": "ATHENAFARM",
  "region": "us-east-1",
  "bucketRegion": "us-east-1",
  "secretId": "FSA-PROD-secrets",
  "debugLogging": true,

  "icebergWarehouse": "s3://c108-prod-fpacfsa-final-zone/athenafarm/iceberg",
  "sssFarmrecordsS3Path": "s3://c108-prod-fpacfsa-landing-zone/farm_records/dbo/",

  "strparams": {
    "landingBucketNameParam": "c108-prod-fpacfsa-landing-zone",
    "cleanBucketNameParam": "c108-prod-fpacfsa-cleansed-zone",
    "finalBucketNameParam": "c108-prod-fpacfsa-final-zone",
    "glueJobRoleArnParam": "arn:aws:iam::253490756794:role/disc-fsa-prod-glue-servicerole",
    "etlRoleArnParam": "arn:aws:iam::253490756794:role/disc-fsa-prod-lambda-servicerole",
    "sfnRoleArnParam": "arn:aws:iam::253490756794:role/disc-fsa-prod-stepfunction-servicerole",
    "snsNotifyFnArnParam": "arn:aws:lambda:us-east-1:253490756794:function:FSA-PROD-ATHENAFARM-NotifyPipeline",
    "pgConnectionNameParam": "FSA-PROD-PG-DART115"
  },

  "paths": {
    "glueRootPath": "glue/",
    "lambdaRootPath": "lambda/"
  },

  "artifacts": {
    "artifactBucket": "fsa-prod-ops",
    "prefix": "athenafarm/"
  },

  "stepFunctions": {
    "createRoleIfMissing": false,
    "roleName": "disc-fsa-prod-stepfunction-servicerole",
    "roleArn": "arn:aws:iam::253490756794:role/disc-fsa-prod-stepfunction-servicerole",
    "nestedCallerRoleArn": "arn:aws:iam::253490756794:role/disc-fsa-prod-stepfunction-nestedcaller-servicerole"
  },

  "GlueConfig": [
    {
      "Ingest-SSS-Farmrecords": {
        "Connections": [{ "ConnectionName": "" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "120",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "10",
        "AutomaticScalingEnabled": "true",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--source_catalog": "AwsDataCatalog",
          "--source_database": "sss-farmrecords",
          "--target_database": "athenafarm_prod_raw",
          "--full_load": "false"
        }
      }
    },
    {
      "Ingest-PG-Reference-Tables": {
        "Connections": [{ "ConnectionName": "FSA-PROD-PG-DART115" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "60",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "4",
        "AutomaticScalingEnabled": "true",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "s3://c108-prod-fpacfsa-landing-zone/dart/scripts/python-modules/dart/glue/psycopg2_binary-2.9.9-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--target_database": "athenafarm_prod_ref"
        }
      }
    },
    {
      "Ingest-PG-CDC-Targets": {
        "Connections": [{ "ConnectionName": "FSA-PROD-PG-DART115" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "60",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "4",
        "AutomaticScalingEnabled": "true",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "s3://c108-prod-fpacfsa-landing-zone/dart/scripts/python-modules/dart/glue/psycopg2_binary-2.9.9-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--target_database": "athenafarm_prod_cdc"
        }
      }
    },
    {
      "Transform-Tract-Producer-Year": {
        "Connections": [{ "ConnectionName": "" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "120",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "20",
        "AutomaticScalingEnabled": "true",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "s3://c108-prod-fpacfsa-landing-zone/dart/scripts/python-modules/dart/glue/psycopg2_binary-2.9.9-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--sss_database": "athenafarm_prod_raw",
          "--ref_database": "athenafarm_prod_ref",
          "--target_database": "athenafarm_prod_gold",
          "--target_table": "tract_producer_year",
          "--full_load": "false"
        }
      }
    },
    {
      "Transform-Farm-Producer-Year": {
        "Connections": [{ "ConnectionName": "" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "120",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "20",
        "AutomaticScalingEnabled": "true",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--sss_database": "athenafarm_prod_raw",
          "--ref_database": "athenafarm_prod_ref",
          "--target_database": "athenafarm_prod_gold",
          "--target_table": "farm_producer_year",
          "--full_load": "false"
        }
      }
    },
    {
      "Sync-Iceberg-To-RDS": {
        "Connections": [{ "ConnectionName": "FSA-PROD-PG-DART115" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "60",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "4",
        "AutomaticScalingEnabled": "true",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "s3://c108-prod-fpacfsa-landing-zone/dart/scripts/python-modules/dart/glue/psycopg2_binary-2.9.9-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--source_database": "athenafarm_prod_gold",
          "--rds_database": "farm_records_reporting",
          "--snapshot_id_param": "/athenafarm/prod/sync_snapshot_id"
        }
      }
    },
    {
      "Iceberg-Maintenance": {
        "Connections": [{ "ConnectionName": "" }],
        "MaxConcurrency": "1",
        "MaxRetries": "0",
        "TimeoutMinutes": "60",
        "WorkerType": "G.2X",
        "SparkUILogsPath": "s3://fsa-prod-ops/glue-logs/spark-ui/athenafarm/",
        "NumberOfWorkers": "2",
        "AutomaticScalingEnabled": "false",
        "GlueVersion": "4.0",
        "JobLanguage": "python",
        "GenerateMetrics": "true",
        "EnableJobBookmarks": "false",
        "JobObservabilityMetrics": "ENABLED",
        "JobContinuousLogging": "ENABLED",
        "TemporaryPath": "s3://fsa-prod-ops/temp/glue/",
        "PythonLibraryPath": "",
        "AdditionalPythonModulesPath": "",
        "UseGlueDataCatalogAsTheHiveMetastore": "true",
        "JobParameters": {
          "--snapshot_retention_hours": "168"
        }
      }
    }
  ]
}
